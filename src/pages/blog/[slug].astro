---
import { getCollection, render } from 'astro:content'
import Layout from '@/layouts/Layout.astro'

export async function getStaticPaths() {
    const posts = await getCollection('blog')
    return posts.map(post => ({
        params: { slug: post.slug },
        props: { post }
    }))
}

const { post } = Astro.props
const { title, description, date, author, avatar, } = post.data

const { Content } = await render(post)
---

<Layout content={{ title }}>
  <section class="max-w-2xl mx-auto mt-20 px-4" aria-labelledby="blog-title">
    <h1 id="blog-title" class="text-5xl font-bold mb-6 custom-gradient text-transparent bg-clip-text text-center">{title}</h1>
    <div class="flex items-center gap-4 mb-6">
      <img src={avatar} alt={`Avatar de ${author}`} class="w-12 h-12 rounded-full border-2 border-accent shadow" />
      <span class="font-semibold">{author}</span>
      <span class="text-sm text-muted-foreground">{new Date(date).toLocaleDateString()}</span>
    </div>
    <p class="font-medium text-muted-foreground mb-6">{description}</p>
   
    <article class="prose prose-neutral dark:prose-invert">
      <Content />
    </article>
  </section>
</Layout>